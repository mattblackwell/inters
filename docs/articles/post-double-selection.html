<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Estimating Interactions with Post-double Selection • inters</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Estimating Interactions with Post-double Selection">
<meta property="og:description" content="inters">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">inters</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/post-double-selection.html">Estimating Interactions with Post-double Selection</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mattblackwell/inters/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="post-double-selection_files/header-attrs-2.8/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Estimating Interactions with Post-double Selection</h1>
            
            <h4 class="date">2021-11-30</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/mattblackwell/inters/blob/master/vignettes/post-double-selection.Rmd"><code>vignettes/post-double-selection.Rmd</code></a></small>
      <div class="hidden name"><code>post-double-selection.Rmd</code></div>

    </div>

    
    
<p>In this vignette, we demonstrate how to use the <code>inters</code> package to conduct post-double selection for interactions with linear models. We use the remittances data of <span class="citation"><a href="#ref-EscMesWri2018" role="doc-biblioref">Escribà-Folch, Meseguer, and Wright</a> (<a href="#ref-EscMesWri2018" role="doc-biblioref">2018</a>)</span> to illustrate the method, as shown in <span class="citation"><a href="#ref-BlaOls19" role="doc-biblioref">Blackwell and Olson</a> (<a href="#ref-BlaOls19" role="doc-biblioref">2019</a>)</span>. The goal of this study was to evaluate how remittances affect political protest differently in democracies and non-democracies.</p>
<p>To begin, we load the data and run two alternative models. The first is a simple single-interaction model that includes the treatment (remittances, <code>remit</code>), the moderator (a binary variable for autocracy, <code>dict</code>), an interaction between these two, and a series of control variables. We use the <code>feols</code> function from the <code>fixest</code> package to handle country and period fixed effects along with clustering at the country level.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">remit</span><span class="op">)</span>
<span class="va">single</span> <span class="op">&lt;-</span> <span class="fu">feols</span><span class="op">(</span><span class="va">Protest</span> <span class="op">~</span> <span class="va">remit</span><span class="op">*</span><span class="va">dict</span> <span class="op">+</span> <span class="va">l1gdp</span> <span class="op">+</span> <span class="va">l1pop</span> <span class="op">+</span> <span class="va">l1nbr5</span> <span class="op">+</span> <span class="va">l12gr</span> <span class="op">+</span> <span class="va">l1migr</span>
               <span class="op">+</span> <span class="va">elec3</span> <span class="op">|</span> <span class="va">period</span> <span class="op">+</span> <span class="va">cowcode</span>, data <span class="op">=</span> <span class="va">remit</span><span class="op">)</span>
<span class="fu">coeftable</span><span class="op">(</span><span class="va">single</span>, cluster <span class="op">=</span> <span class="op">~</span> <span class="va">caseid</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"remit"</span>, <span class="st">"remit:dict"</span><span class="op">)</span>,<span class="op">]</span></code></pre></div>
<pre><code>##                Estimate Std. Error     t value    Pr(&gt;|t|)
## remit      0.0001522474 0.02253011 0.006757506 0.994614839
## remit:dict 0.0624127003 0.02336419 2.671297291 0.008156839</code></pre>
<p>Next, we compare this single-interaction model to a model that fully interacts the moderator with the entire set of controls, including the fixed effects. <span class="citation"><a href="#ref-BlaOls19" role="doc-biblioref">Blackwell and Olson</a> (<a href="#ref-BlaOls19" role="doc-biblioref">2019</a>)</span> call this the <em>fully moderated model</em>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fully</span> <span class="op">&lt;-</span> <span class="fu">feols</span><span class="op">(</span><span class="va">Protest</span> <span class="op">~</span> <span class="va">dict</span> <span class="op">*</span> <span class="op">(</span><span class="va">remit</span> <span class="op">+</span> <span class="va">l1gdp</span> <span class="op">+</span> <span class="va">l1pop</span> <span class="op">+</span> <span class="va">l1nbr5</span> <span class="op">+</span> <span class="va">l12gr</span> <span class="op">+</span> <span class="va">l1migr</span> <span class="op">+</span>
                                   <span class="va">elec3</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">period</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cowcode</span><span class="op">)</span><span class="op">)</span>,
               data <span class="op">=</span> <span class="va">remit</span><span class="op">)</span></code></pre></div>
<pre><code>## Variables 'dict:factor(cowcode)94', 'dict:factor(cowcode)100' and 60 others have been removed because of collinearity (see $collin.var).</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">coeftable</span><span class="op">(</span><span class="va">fully</span>, <span class="va">cluster</span> <span class="op">~</span> <span class="va">caseid</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"remit"</span>, <span class="st">"dict:remit"</span><span class="op">)</span>,<span class="op">]</span></code></pre></div>
<pre><code>##              Estimate Std. Error   t value   Pr(&gt;|t|)
## remit      0.06427051 0.03226551 1.9919259 0.04769348
## dict:remit 0.01102520 0.04321956 0.2550975 0.79890106</code></pre>
<p>Finally, we compare both of these approaches to that of the post-double-selection estimator of <span class="citation"><a href="#ref-BelCheHan14" role="doc-biblioref">Belloni, Chernozhukov, and Hansen</a> (<a href="#ref-BelCheHan14" role="doc-biblioref">2014</a>)</span>, which uses the lasso to select variables that are important to the outcome, treatment, or the treatment-moderator interaction, then runs a standard least squares regression on those variables selected by the various lasso steps. The <code>post_ds_interactions</code> function implements this procedure and takes character strings with the names of various variables. Furthermore, it can also handle clustered data, which importantly changes the calculation of the penalty parameter in the lasso steps.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">controls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"l1gdp"</span>, <span class="st">"l1pop"</span>, <span class="st">"l1nbr5"</span>, <span class="st">"l12gr"</span>, <span class="st">"l1migr"</span>, <span class="st">"elec3"</span><span class="op">)</span>
<span class="va">post_ds_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/post_ds_interaction.html">post_ds_interaction</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">remit</span>, treat <span class="op">=</span> <span class="st">"remit"</span>, moderator <span class="op">=</span> <span class="st">"dict"</span>,
                                outcome <span class="op">=</span> <span class="st">"Protest"</span>, control_vars <span class="op">=</span> <span class="va">controls</span>,
                                panel_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"cowcode"</span>, <span class="st">"period"</span><span class="op">)</span>,
                                cluster <span class="op">=</span> <span class="st">"caseid"</span><span class="op">)</span>
<span class="fu">lmtest</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lmtest/man/coeftest.html">coeftest</a></span><span class="op">(</span><span class="va">post_ds_out</span>, vcov <span class="op">=</span> <span class="va">post_ds_out</span><span class="op">$</span><span class="va">clustervcv</span><span class="op">)</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"remit"</span>, <span class="st">"remit_dict"</span><span class="op">)</span>,<span class="op">]</span></code></pre></div>
<pre><code>##              Estimate Std. Error  t value    Pr(&gt;|t|)
## remit      0.03225160 0.01183225 2.725736 0.006462323
## remit_dict 0.01488431 0.01336672 1.113535 0.265590094</code></pre>
<p>With these results in hand, we can compare the different methods to see that the fully moderated and post-double-selection approaches both provide similar point estimates, with the post-double-selection estimator having slightly less uncertainty. The single-interaction model, on the other hand, leads to a dramatically different conclusion.</p>
<p><img src="post-double-selection_files/figure-html/coefplot-1.png" width="768" style="display: block; margin: auto;"></p>
<div id="references" class="section level2 unnumbered">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-BelCheHan14" class="csl-entry">
Belloni, Alexandre, Victor Chernozhukov, and Christian Hansen. 2014. <span>“Inference on Treatment Effects After Selection Among High-Dimensional Controls.”</span> <em>The Review of Economic Studies</em> 81 (2): 608–50. <a href="https://doi.org/10.1093/restud/rdt044">https://doi.org/10.1093/restud/rdt044</a>.
</div>
<div id="ref-BlaOls19" class="csl-entry">
Blackwell, Matthew, and Michael Olson. 2019. <span>“Reducing Model Misspecification and Bias in the Estimation of Interactions.”</span> <em>Working Paper</em>. <a href="http://www.mattblackwell.org/files/papers/lasso-inters.pdf">http://www.mattblackwell.org/files/papers/lasso-inters.pdf</a>.
</div>
<div id="ref-EscMesWri2018" class="csl-entry">
Escribà-Folch, Abel, Covadonga Meseguer, and Joseph Wright. 2018. <span>“Remittances and Protest in Dictatorships.”</span> <em>American Journal of Political Science</em> 62 (4): 889–904. <a href="https://doi.org/10.1111/ajps.12382">https://doi.org/10.1111/ajps.12382</a>.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matthew Blackwell, Olson Michael.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
